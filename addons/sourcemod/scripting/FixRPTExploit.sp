#pragma semicolon 1

#include <sourcemod>

#pragma newdecls required

public Plugin myinfo = 
{
	name = "RPT Exploit Fixer",
	author = "null138",
	description = "Fixes latest RPT server exploit on linux",
	version = "1.0.0",
	url = "https://steamcommunity.com/id/null138/"
}

public void OnPluginStart()
{
	Handle hConfig = LoadGameConfigFile("FixRPTExploit.games");
	if (hConfig == INVALID_HANDLE)
		SetFailState("Couldn't load FixRPTExploit game config!");

	Address aRptServerEnabl = GameConfGetAddress(hConfig, "aRptServerEnabl_ptr");
	Address aRptClientEnabl = GameConfGetAddress(hConfig, "aRptClientEnabl_ptr");

	if (aRptServerEnabl)
		StoreToAddress(aRptServerEnabl, 0x0, NumberType_Int8);
	if (aRptClientEnabl)
		StoreToAddress(aRptClientEnabl, 0x0, NumberType_Int8);
}
